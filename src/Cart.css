/* Modern minimal cart */
:root { --accent:#c9a646; --accent-rgb:201,166,70; --accent-dark:#b28b24; --accent-grad:linear-gradient(135deg,#e3ce8a 0%,#c9a646 45%,#b28b24 100%); --border:#eceef0; --promo-primary:#4CAF50; --promo-primary-rgb:76,175,80; }
.cart-overlay { position:fixed; inset:0; background:rgba(0,0,0,.48); backdrop-filter:blur(4px); z-index:1000; }
.cart-sidebar.modern { position:fixed; top:0; right:-460px; width:460px; max-width:100vw; height:100vh; background:#fff; border-left:1px solid var(--border); box-shadow:-4px 0 20px -4px rgba(0,0,0,.25); z-index:1001; display:flex; flex-direction:column; transition:right .4s cubic-bezier(.6,.05,.3,1); overflow-x:hidden; box-sizing:border-box; }
.cart-sidebar.modern.open { right:0; }

/* Responsive para m√≥viles */
@media (max-width: 480px) {
  .cart-sidebar.modern {
    width: 100vw;
    right: -100vw;
  }
}
.cart-header.enhanced { display:flex; justify-content:space-between; align-items:flex-start; gap:26px; padding:30px 30px 18px; border-bottom:none; }
.cart-title-block h2 { margin:0 0 -9px; font-size:1.4rem; font-weight:600; letter-spacing:.3px; }
.cart-title-block .cart-sub { font-size:.65rem; font-weight:600; letter-spacing:.6px; text-transform:uppercase; color:#666; margin-top:0; }

/* Action cluster reuse */
.action-cluster { display:inline-flex; background:#111; border:1px solid #000; padding:6px 8px; gap:6px; border-radius:18px; box-shadow:0 8px 24px -6px rgba(0,0,0,.45),0 2px 4px rgba(0,0,0,.4); }
.action-cluster .cluster-btn { position:relative; display:inline-flex; align-items:center; justify-content:center; gap:6px; font-size:12px; letter-spacing:.5px; padding:10px 16px; border:none; background:transparent; color:#f5f5f5; cursor:pointer; font-weight:500; border-radius:14px; transition:background .18s,color .18s,filter .18s; }
.action-cluster .cluster-btn:hover { background:#1f1f1f; }
.action-cluster .cluster-btn.primary { background:var(--accent-grad); color:#1a1200; font-weight:600; box-shadow:0 4px 14px -4px rgba(var(--accent-rgb),.5); }
.action-cluster .cluster-btn.primary:hover { filter:brightness(1.07); }
.action-cluster .cluster-btn.ghost { background:rgba(255,255,255,.07); }
.action-cluster .cluster-btn.ghost:hover { background:#222; }
.action-cluster .cluster-btn.icon { width:42px; padding:0; }

/* Mobile adjustments for action cluster - moved to main media query */

/* Promo Progress Bar */
.promo-progress-container { background:linear-gradient(135deg,#f8f9fa 0%,#ffffff 100%); padding:20px 30px 24px; border-bottom:1px solid var(--border); position:relative; overflow:hidden; }
.promo-progress-container::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--promo-primary),#2196F3,#9C27B0); opacity:.3; }
.promo-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; gap:12px; flex-wrap:wrap; }
.promo-title { font-size:.8rem; font-weight:700; letter-spacing:.5px; color:#222; }
.promo-remaining { font-size:.65rem; font-weight:600; color:#666; background:#fff; padding:6px 12px; border-radius:12px; border:1px solid #e0e0e0; white-space:nowrap; }
.promo-completed { font-size:.7rem; font-weight:600; color:var(--promo-primary); background:rgba(var(--promo-primary-rgb),.1); padding:6px 12px; border-radius:12px; border:1px solid rgba(var(--promo-primary-rgb),.3); }

.promo-bar-wrapper { margin-bottom:16px; }
.promo-bar-track { position:relative; height:12px; background:#e8eaed; border-radius:20px; overflow:visible; box-shadow:inset 0 2px 4px rgba(0,0,0,.08); }
.promo-bar-fill { position:absolute; top:0; left:0; height:100%; background:linear-gradient(90deg,var(--promo-primary) 0%,#66BB6A 50%,#81C784 100%); border-radius:20px; transition:width .5s cubic-bezier(.4,0,.2,1); box-shadow:0 2px 8px rgba(var(--promo-primary-rgb),.4); }
.promo-bar-fill::after { content:''; position:absolute; top:0; left:0; right:0; bottom:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent); animation:shimmer 2s infinite; border-radius:20px; }
@keyframes shimmer { 0%,100%{transform:translateX(-100%);} 50%{transform:translateX(100%);} }

.promo-milestone { position:absolute; top:50%; transform:translate(-50%,-50%); width:32px; height:32px; background:#fff; border:3px solid #e0e0e0; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:all .3s cubic-bezier(.4,0,.2,1); z-index:2; box-shadow:0 2px 8px rgba(0,0,0,.15); }
.promo-milestone .milestone-icon { font-size:14px; opacity:.4; transition:all .3s; color:#666; display:flex; align-items:center; justify-content:center; }
.promo-milestone .milestone-icon svg { stroke:#666; display:block; }
.promo-milestone.unlocked { border-color:var(--promo-primary); background:linear-gradient(135deg,#66BB6A,var(--promo-primary)); transform:translate(-50%,-50%) scale(1.15); box-shadow:0 4px 16px rgba(var(--promo-primary-rgb),.5),0 0 0 4px rgba(var(--promo-primary-rgb),.2); }
.promo-milestone.unlocked .milestone-icon { opacity:1; animation:bounce .5s; color:#fff; }
.promo-milestone.unlocked .milestone-icon svg { stroke:#fff; }
@keyframes bounce { 0%,100%{transform:scale(1);} 50%{transform:scale(1.2);} }

.promo-unlocked-list { display:flex; flex-direction:column; gap:8px; }
.promo-unlocked-item { display:flex; align-items:center; gap:10px; background:#fff; padding:10px 14px; border-radius:12px; border:1px solid rgba(var(--promo-primary-rgb),.3); animation:slideIn .4s ease-out; }
@keyframes slideIn { from{opacity:0;transform:translateX(-20px);} to{opacity:1;transform:translateX(0);} }
.unlocked-icon { font-size:1.2rem; flex-shrink:0; }
.unlocked-text { flex:1; font-size:.75rem; font-weight:600; color:#222; letter-spacing:.3px; }
.unlocked-badge { width:20px; height:20px; background:var(--promo-primary); color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:.7rem; font-weight:700; flex-shrink:0; }

.cart-content { flex:1; display:flex; flex-direction:column; overflow:hidden; }
.cart-items.modern { flex:1; overflow-y:auto; padding:4px 30px 30px; scrollbar-width:none; }
.cart-items.modern::-webkit-scrollbar { display:none; }
.cart-item.modern { display:flex; gap:16px; padding:20px 0 22px; border-bottom:1px solid var(--border); }
.cart-item.modern:last-child { border-bottom:none; }
.cart-item.modern.promo-gift-item { background:linear-gradient(135deg,rgba(var(--promo-primary-rgb),.05),rgba(76,175,80,.02)); border:1px dashed rgba(var(--promo-primary-rgb),.3); border-radius:16px; padding:16px; margin:12px 0; }
.cart-item-image { width:68px; height:68px; border-radius:18px; overflow:hidden; background:#f1f2f3; flex-shrink:0; box-shadow:0 2px 6px -2px rgba(0,0,0,.15); }
.cart-item-image.gift-box { background:linear-gradient(135deg,#f0f9f4,#e8f5e9); display:flex; align-items:center; justify-content:center; border:2px solid rgba(var(--promo-primary-rgb),.3); }
.cart-item-image.gift-box svg { stroke:var(--promo-primary); }
.cart-item-image img { width:100%; height:100%; object-fit:cover; }
.cart-item-info h4 { margin:0 0 6px; font-size:.9rem; font-weight:600; letter-spacing:.3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.cart-item-info { min-width:0; flex:1; }
.cart-item-category { margin:0 0 6px; font-size:.55rem; font-weight:600; letter-spacing:.6px; text-transform:uppercase; color:#666; }
.cart-item-price { margin:0; font-size:.85rem; font-weight:600; }
.cart-item-price.promo-free { color:var(--promo-primary); font-size:.9rem; font-weight:700; }

.cart-item-actions { display:flex; flex-direction:column; gap:12px; align-items:flex-end; min-width:118px; }
.promo-badge-lock { background:rgba(var(--promo-primary-rgb),.15); border:1px solid rgba(var(--promo-primary-rgb),.3); width:38px; height:38px; border-radius:12px; display:flex; align-items:center; justify-content:center; }
.promo-badge-lock svg { stroke:var(--promo-primary); }
.quantity-controls.soft { display:inline-flex; align-items:center; gap:8px; background:#f6f8f9; padding:6px 10px; border-radius:14px; border:1px solid #e2e5e8; width:100%; justify-content:space-between; }
.quantity-btn { background:transparent; border:none; width:30px; height:30px; display:inline-flex; align-items:center; justify-content:center; font-size:16px; font-weight:600; cursor:pointer; border-radius:10px; color:#222; transition:.18s; }
.quantity-btn:hover { background:#eceff1; }
.quantity { font-size:.85rem; font-weight:600; min-width:20px; text-align:center; }
.remove-item-btn { background:#fff; border:1px solid #e2e5e8; width:38px; height:38px; border-radius:12px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; transition:.18s; box-shadow:0 2px 6px -2px rgba(0,0,0,.1); }
.remove-item-btn:hover { background:#ffecec; border-color:#e4b4b4; transform:translateY(-1px); }
.remove-item-btn svg { stroke:#d21818; }

/* Empty modern */
.modern-empty { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:80px 20px; text-align:center; }
.modern-empty h3 { margin:34px 0 10px; font-size:1.5rem; font-weight:500; }
.modern-empty .desc { margin:0 0 32px; font-size:.85rem; color:#555; max-width:320px; }
.empty-visual { position:relative; width:160px; height:160px; }
.empty-ring { position:absolute; inset:0; border-radius:50%; background:radial-gradient(circle at 70% 30%,rgba(var(--accent-rgb),0.25),transparent 70%); filter:blur(2px); opacity:.55; }
.empty-icon { position:relative; font-size:3.4rem; display:flex; align-items:center; justify-content:center; width:160px; height:160px; }
.empty-actions.refined { display:flex; gap:16px; flex-wrap:wrap; justify-content:center; }
.cluster-like { border:none; cursor:pointer; font-size:12px; font-weight:600; letter-spacing:.5px; padding:14px 20px; border-radius:18px; background:#111; color:#f4f4f4; box-shadow:0 6px 24px -8px rgba(0,0,0,.5); transition:.2s; }
.cluster-like:hover { background:#1d1d1d; }
.cluster-like.accent { background:linear-gradient(135deg,#1e5bb8 0%,#0d4ca3 45%,#0a3d82 100%); color:#ffffff; }
.cluster-like.accent:hover { filter:brightness(1.06); }
.cluster-like.ghost { background:#fff; color:#222; border:1px solid #d0d4d8; }
.cluster-like.ghost:hover { background:#f6f8f9; }

/* Summary */
.cart-summary.modern { border-top:1px solid var(--border); padding:26px 30px 34px; background:#fff; box-shadow:0 -6px 18px -8px rgba(0,0,0,.08); }
.summary-totals { display:grid; gap: 0px; margin-bottom:10px; }
.summary-totals .row { display:flex; align-items:center; justify-content:space-between; font-size:1rem; font-weight:500; letter-spacing:.3px; padding:6px 0; }
.summary-totals .row .lbl { text-transform:uppercase; font-size:.75rem; letter-spacing:.6px; color:#555; font-weight:600; }
.summary-totals .row.discount { color:var(--promo-primary); background:transparent; padding:8px 0; border:none; box-shadow:none; }
.summary-totals .row.discount .lbl { color:var(--promo-primary); font-weight:700; }
.summary-totals .row.discount .val { font-weight:700; font-size:.85rem; }
.summary-totals .row.gift-item .lbl { color:#666; }
.summary-totals .row.gift-item .val.free { color:var(--promo-primary); font-weight:700; background:rgba(var(--promo-primary-rgb),.1); padding:4px 10px; border-radius:8px; font-size:.65rem; }
.summary-totals .row.shipping-free .lbl { color:#666; }
.summary-totals .row.shipping-free .val.free { color:var(--promo-primary); font-weight:700; background:rgba(var(--promo-primary-rgb),.1); padding:4px 10px; border-radius:8px; font-size:.65rem; }
.summary-totals .row.total { background:linear-gradient(135deg,#111,#1e1e1e); padding:10px 14px 12px; border-radius:12px; color:#f5f5f5; box-shadow:0 4px 14px -6px rgba(0,0,0,.55); margin-top:8px; }
.summary-totals .row.total .lbl { color:#ddd; }
.summary-totals .row.total .val { font-size:1rem; font-weight:400; letter-spacing:.4px; }
.summary-actions { display:flex; gap:14px; flex-wrap:wrap; }
.summary-btn { flex:1; min-width:140px; height:46px; padding:0 20px; border-radius:16px; border:1px solid #d5d7db; background:#fff; cursor:pointer; font-size:.75rem; font-weight:600; letter-spacing:.5px; display:inline-flex; align-items:center; justify-content:center; transition:.18s; }
.summary-btn:hover { background:#111; color:#fff; border-color:#111; }
.summary-btn.accent { background:linear-gradient(135deg,#1e5bb8 0%,#0d4ca3 45%,#0a3d82 100%); color:#ffffff; border:1px solid #0a3d82; box-shadow:0 4px 14px -4px rgba(13,76,163,.5); }
.summary-btn.accent:hover { filter:brightness(1.07); }
.summary-btn.ghost { background:#fff; }

@media (max-width:520px){
  .cart-sidebar.modern { width:100vw; right:-100vw; }
  .cart-sidebar.modern.open { right:0; }
  .cart-header.enhanced { padding:26px 22px 14px; }
  .action-cluster { padding:6px 6px !important; gap:2px !important; border-radius:14px !important; max-width:180px !important; }
  .action-cluster .cluster-btn { font-size:9px !important; padding:8px 8px !important; gap:2px !important; min-width:auto !important; }
  .action-cluster .cluster-btn.icon { width:30px !important; min-width:30px !important; }
  .promo-progress-container { padding:18px 22px 20px; }
  .promo-header { flex-direction:column; align-items:flex-start; gap:8px; }
  .promo-title { font-size:.75rem; }
  .promo-remaining, .promo-completed { font-size:.6rem; padding:5px 10px; }
  .promo-milestone { width:28px; height:28px; }
  .promo-milestone .milestone-icon { font-size:12px; }
  .promo-unlocked-item { padding:8px 12px; }
  .unlocked-icon { font-size:1rem; }
  .unlocked-text { font-size:.7rem; }
  .cart-items.modern { padding:4px 22px 26px; }
  .cart-summary.modern { padding:24px 22px 30px; }
}

/* üîê MODAL DE LOGIN REQUERIDO */
.login-required-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10002;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 90%;
  max-width: 440px;
  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -45%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

.login-required-modal .modal-content {
  width: 442.95px;
  height: 483.66px;
  padding: 40px 32px;
  text-align: center;
  margin-right: 20px; /* Estirar hacia la derecha */
}

.login-required-modal .modal-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, rgba(201, 166, 70, 0.1), rgba(201, 166, 70, 0.15));
  border-radius: 50%;
  margin: 0 auto 24px;
  border: 2px solid rgba(201, 166, 70, 0.2);
}

.login-required-modal .modal-icon svg {
  stroke: var(--accent);
  stroke-width: 2;
}

.login-required-modal h3 {
  margin: 0 0 12px;
  font-size: 1.5rem;
  font-weight: 600;
  color: #1a1a1a;
  letter-spacing: 0.3px;
}

.login-required-modal p {
  margin: 0 0 32px;
  font-size: 0.95rem;
  color: #666;
  line-height: 1.6;
  max-width: 360px;
  margin-left: auto;
  margin-right: auto;
}

.login-required-modal .modal-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.login-required-modal .modal-btn {
  padding: 14px 24px;
  border: none;
  border-radius: 12px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  letter-spacing: 0.3px;
}

.login-required-modal .modal-btn.primary {
  background: var(--accent-grad);
  color: #1a1200;
  box-shadow: 0 4px 14px rgba(var(--accent-rgb), 0.35);
}

.login-required-modal .modal-btn.primary:hover {
  filter: brightness(1.08);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(var(--accent-rgb), 0.4);
}

.login-required-modal .modal-btn.secondary {
  background: #f5f5f5;
  color: #333;
  border: 1px solid #e0e0e0;
}

.login-required-modal .modal-btn.secondary:hover {
  background: #ebebeb;
  border-color: #d0d0d0;
}

@media (max-width: 480px) {
  .login-required-modal {
    width: 95%;
    max-width: none;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }

  .login-required-modal .modal-content {
    width: auto;
    height: auto;
    padding: 24px 16px;
    margin-right: 0;
  }

  .login-required-modal h3 {
    font-size: 1.2rem;
    margin-bottom: 16px;
  }

  .login-required-modal p {
    font-size: 0.85rem;
    line-height: 1.4;
    margin-bottom: 24px;
  }

  .login-required-modal .modal-btn {
    font-size: 0.9rem;
    padding: 12px 20px;
  }
}
